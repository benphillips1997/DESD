<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice #{{ invoice.invoiceID }}</title>
    <style>
        body { font-family: 'Helvetica', 'Arial', sans-serif; margin: 0 auto; max-width: 800px; }
        .invoice-header, .invoice-footer { background-color: #F0F0F0; padding: 20px; text-align: center; }
        .invoice-body { padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { text-align: left; padding: 8px; border-bottom: 1px solid #ddd; }
        th { background-color: #19314E; color: white; }
        .text-right { text-align: right; }
        .invoice-to { margin-bottom: 20px; }
        .invoice-to table { border: none; }
        .invoice-to th, .invoice-to td { border: none; padding: 4px; }
        .invoice-to th { text-align: left; white-space: nowrap; }
        .invoice-to td { width: 100%; }
    </style>
</head>
<body>
    <div class="invoice-header">
        <h1>Invoice #{{ invoice.invoiceID }}</h1>
        <p>SmartCare Surgery</p>
        <p>123 Health Street, Bristol, BS1 4ND</p>
    </div>

    <div class="invoice-body">
        <section class="invoice-to">
            <h2>Invoice To:</h2>
            <table>
                <tr>
                    <th>Name:</th>
                    <td>{{ invoice.appointment.patient.name }}</td>
                </tr>
                <tr>
                    <th>Email:</th>
                    <td>{{ invoice.appointment.patient.email }}</td>
                </tr>
                <tr>
                    <th>Location:</th>
                    <td>{{ invoice.appointment.patient.location }}</td>
                </tr>
            </table>
        </section>

        <section>
            <h2>Appointment Details:</h2>
            <table>
                <thead>
                    <tr>
                        <th>Description</th>
                        <th class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Appointment with {{ invoice.appointment.doctor.role|capfirst }} {{ invoice.appointment.doctor.name }} on {{ invoice.appointment.date }} at {{ invoice.appointment.appointment_time }} for {{ duration_minutes }} minutes.</td>
                        <td class="text-right">£{{ invoice.amount|floatformat:2 }}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th>Total Due:</th>
                        <th class="text-right">£{{ invoice.amount|floatformat:2 }}</th>
                    </tr>
                </tfoot>
            </table>
        </section>
    </div>

    <div class="invoice-footer">
        <p>Payment due by {{ invoice.due_date }}</p>
        <p>If you have any questions about this invoice, please contact 079 6916 9154</p>
        <p>Thank you for choosing SmartCare Surgery.</p>
    </div>
</body>
</html>